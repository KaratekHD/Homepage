<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Personal website of KaratekHD"><link href=https://karatek.net/blog/2020/10/15/future-of-nemesis-and-general-direction-of-the-karatek-network/ rel=canonical><meta name=author content=KaratekHD><link rel="shortcut icon" href=../../../../../img/logo.png><meta name=generator content="mkdocs-1.1, mkdocs-material-5.5.12"><title>[15/10/2020] Short Update on the future of Nemesis and the general direction of the Karatek Network - KaratekHD</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.4dd2dd8d.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.6a5ad368.min.css><meta name=theme-color content=#ef5552><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Noto+Sans:300,400,400i,700%7CHack&display=fallback"><style>body,input{font-family:"Noto Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Hack",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir=ltr data-md-color-scheme data-md-color-primary=red data-md-color-accent=red> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#short-update-on-the-future-of-nemesis-and-the-general-direction-of-the-karatek-network class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://karatek.net title=KaratekHD class="md-header-nav__button md-logo" aria-label=KaratekHD> <img src=../../../../../img/red.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> KaratekHD </span> <span class="md-header-nav__topic md-ellipsis"> [15/10/2020] Short Update on the future of Nemesis and the general direction of the Karatek Network </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../../../Downloads/Linux/ class=md-tabs__link> Downloads </a> </li> <li class=md-tabs__item> <a href=../../../../../Legal/contact/ class=md-tabs__link> Legal </a> </li> <li class=md-tabs__item> <a href=../../../../../Miscellaneous/androids-datenschutz-optimieren/ class=md-tabs__link> Miscellaneous </a> </li> <li class=md-tabs__item> <a href=../../../../../Projects_and_Services/Projects/GUtilities/ class=md-tabs__link> Projects and Services </a> </li> <li class=md-tabs__item> <a href=../../../../../Telegram_Web/ class=md-tabs__link> Telegram Web </a> </li> <li class=md-tabs__item> <a href=./ class="md-tabs__link md-tabs__link--active"> Blog </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://karatek.net title=KaratekHD class="md-nav__button md-logo" aria-label=KaratekHD> <img src=../../../../../img/red.png alt=logo> </a> KaratekHD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Downloads <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Downloads data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> Downloads </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../Downloads/Linux/ title="Download Packages for GNU/Linux based Operating Systems" class=md-nav__link> Download Packages for GNU/Linux based Operating Systems </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Legal <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Legal data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Legal </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../Legal/contact/ title=Legal class=md-nav__link> Legal </a> </li> <li class=md-nav__item> <a href=../../../../../Legal/privacy/ title="Privacy policy for Karatek services (English)" class=md-nav__link> Privacy policy for Karatek services (English) </a> </li> <li class=md-nav__item> <a href=../../../../../Legal/privacy_de/ title="Datenschutzerklärung für Karatek Dienste (Deutsch)" class=md-nav__link> Datenschutzerklärung für Karatek Dienste (Deutsch) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Miscellaneous <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Miscellaneous data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"></span> Miscellaneous </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../Miscellaneous/androids-datenschutz-optimieren/ title="Androids datenschutz optimieren" class=md-nav__link> Androids datenschutz optimieren </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-2 type=checkbox id=nav-4-2> <label class=md-nav__link for=nav-4-2> GodsOfOlympus <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=GodsOfOlympus data-md-level=2> <label class=md-nav__title for=nav-4-2> <span class="md-nav__icon md-icon"></span> GodsOfOlympus </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../Miscellaneous/GodsOfOlympus/request/ title="Feature requests for Gods of Olympus" class=md-nav__link> Feature requests for Gods of Olympus </a> </li> <li class=md-nav__item> <a href=../../../../../Miscellaneous/GodsOfOlympus/telegram/ title="Telegram für Android (datenschutzfreundlich) einrichten" class=md-nav__link> Telegram für Android (datenschutzfreundlich) einrichten </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-3 type=checkbox id=nav-4-3> <label class=md-nav__link for=nav-4-3> School <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=School data-md-level=2> <label class=md-nav__title for=nav-4-3> <span class="md-nav__icon md-icon"></span> School </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../Miscellaneous/School/signing-and-encryption/ title="Introduction to OpenPGP for secure communication during COVID19 Pandemic" class=md-nav__link> Introduction to OpenPGP for secure communication during COVID19 Pandemic </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Projects and Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Projects and Services" data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"></span> Projects and Services </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-1 type=checkbox id=nav-5-1> <label class=md-nav__link for=nav-5-1> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=nav-5-1> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../Projects_and_Services/Projects/GUtilities/ title="GUtilities Reloaded- Utilities for Spigot" class=md-nav__link> GUtilities Reloaded- Utilities for Spigot </a> </li> <li class=md-nav__item> <a href=../../../../../Projects_and_Services/Projects/K-Music/ title="Karatek Music Player" class=md-nav__link> Karatek Music Player </a> </li> <li class=md-nav__item> <a href=../../../../../Projects_and_Services/Projects/Kircle/ title="Kircle - Rechnen mit Kreisen" class=md-nav__link> Kircle - Rechnen mit Kreisen </a> </li> <li class=md-nav__item> <a href=../../../../../Projects_and_Services/Projects/Nemesis/ title="Nemesis - an open-source Telegram group managment bot" class=md-nav__link> Nemesis - an open-source Telegram group managment bot </a> </li> <li class=md-nav__item> <a href=../../../../../Projects_and_Services/Projects/TeamspeakBot/ title="Karatek TeamspeakBot" class=md-nav__link> Karatek TeamspeakBot </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Services data-md-level=2> <label class=md-nav__title for=nav-5-2> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../Projects_and_Services/Services/Nemesis/ title="Nemesis - an open-source Telegram group managment bot" class=md-nav__link> Nemesis - an open-source Telegram group managment bot </a> </li> <li class=md-nav__item> <a href=../../../../../Projects_and_Services/Services/ts/ title="Karatek Teamspeak Server" class=md-nav__link> Karatek Teamspeak Server </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Telegram Web <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Telegram Web" data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"></span> Telegram Web </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../Telegram_Web/ title="Telegram Web" class=md-nav__link> Telegram Web </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7 type=checkbox id=nav-7 checked> <label class=md-nav__link for=nav-7> Blog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=nav-7> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> [15/10/2020] Short Update on the future of Nemesis and the general direction of the Karatek Network <span class="md-nav__icon md-icon"></span> </label> <a href=./ title="[15/10/2020] Short Update on the future of Nemesis and the general direction of the Karatek Network" class="md-nav__link md-nav__link--active"> [15/10/2020] Short Update on the future of Nemesis and the general direction of the Karatek Network </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#changes-to-our-privacy-policy class=md-nav__link> Changes to our Privacy Policy </a> </li> <li class=md-nav__item> <a href=#what-about-nemesis class=md-nav__link> What about Nemesis? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../07/22/verschwoerungen/ title="[22/07/2020] Aufruf gegen Verschwörungstheorien" class=md-nav__link> [22/07/2020] Aufruf gegen Verschwörungstheorien </a> </li> <li class=md-nav__item> <a href=../../../06/15/datenschutz-bei-untis-messenger/ title="[15/06/2020] Datenschutz bei Untis Messenger" class=md-nav__link> [15/06/2020] Datenschutz bei Untis Messenger </a> </li> <li class=md-nav__item> <a href=../../../06/12/androids-datenschutz-optimieren/ title="[12/06/2020] Androids Datenschutzeinstellungen optimieren und Android absichern" class=md-nav__link> [12/06/2020] Androids Datenschutzeinstellungen optimieren und Android absichern </a> </li> <li class=md-nav__item> <a href=../../../05/24/introducing-karatek-status-page/ title="[24/05/2020] Introducing the Karatek Status Page" class=md-nav__link> [24/05/2020] Introducing the Karatek Status Page </a> </li> <li class=md-nav__item> <a href=../../../05/08/signing-and-encryption/ title="[08/05/2020] Introduction to OpenPGP for secure communication during COVID19 Pandemic" class=md-nav__link> [08/05/2020] Introduction to OpenPGP for secure communication during COVID19 Pandemic </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-7 type=checkbox id=nav-7-7> <label class=md-nav__link for=nav-7-7> More articles (2) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="More articles (2)" data-md-level=2> <label class=md-nav__title for=nav-7-7> <span class="md-nav__icon md-icon"></span> More articles (2) </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-7-7-1 type=checkbox id=nav-7-7-1> <label class=md-nav__link for=nav-7-7-1> Page 1 of 1 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Page 1 of 1" data-md-level=3> <label class=md-nav__title for=nav-7-7-1> <span class="md-nav__icon md-icon"></span> Page 1 of 1 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../03/04/feature-requests-for-gdo/ title="[04/03/2020] Feature requests for Gods of Olympus" class=md-nav__link> [04/03/2020] Feature requests for Gods of Olympus </a> </li> <li class=md-nav__item> <a href=../../../01/05/telegram-fuer-android-einrichten/ title="[05/01/2020] Telegram für Android (datenschutzfreundlich) einrichten" class=md-nav__link> [05/01/2020] Telegram für Android (datenschutzfreundlich) einrichten </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#changes-to-our-privacy-policy class=md-nav__link> Changes to our Privacy Policy </a> </li> <li class=md-nav__item> <a href=#what-about-nemesis class=md-nav__link> What about Nemesis? </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=short-update-on-the-future-of-nemesis-and-the-general-direction-of-the-karatek-network>Short Update on the future of Nemesis and the general direction of the Karatek Network</h1> <p><hr> <br> <a href=https://counter.opensuse.org/link/ ><img src=http://countdown.opensuse.org/wide.png border=0></a> <br> <hr> It has been very quite here, and a lot of things changed in the meantime, so I think it is time for a quick update.</p> <h2 id=changes-to-our-privacy-policy>Changes to our Privacy Policy</h2> <p>In the past months, a lot of incidents regarding disrespectful handling of personal information occurred inside our team. This is why I am about to change our privacy policy. Our current policies allow us to do really much with the data we collect. While this is pretty helpful for some tasks, it is not strictly necessary. We are about to rewrite the entire policy in order to create a new, more transparent, readable version of it, which is more user-friendly. We won't collect anymore information which are not strictly necessary in the future.</p> <h2 id=what-about-nemesis>What about Nemesis?</h2> <p>It has been pretty quite in Nemesis's repository for quite some time: <img src=/img/Screenshot_20201015_152735.png alt=Image><br> <em>Picture: Screenshot/Karatek_HD</em></p> <p>I'd like to explain why. Nemesis uses an old version of the python-telegram-bot-api, and needs to be ported to the latest version:<br> <img src=/img/Screenshot_20201015_153703.png alt=Image> <em>Picture: Screenshot/Karatek_HD</em></p> <p>I just cannot figure out how to fix one error in particular, and do not have the motivation to dive that much into it right now. If someone has an idea about how to fix this error, any help is appreciated, please contact me at <a href=mailto:kontakt@karatek.net>kontakt@karatek.net</a> or write a comment below:</p> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>Example log output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>[2020-10-15 15:42:36,090 | DEBUG] Getting updates: [810669973]
[2020-10-15 15:42:36,090 | DEBUG] [&lt;telegram.update.Update object at 0x7f570a3dfd00&gt;]
[2020-10-15 15:42:36,090 | DEBUG] Exiting: get_updates
[2020-10-15 15:42:36,090 | DEBUG] Entering: get_updates
[2020-10-15 15:42:36,091 | DEBUG] Processing Update: {&#39;update_id&#39;: 810669973, &#39;message&#39;: {&#39;message_id&#39;: 123, &#39;date&#39;: 1602769356, &#39;chat&#39;: {&#39;id&#39;: -1001153616526, &#39;type&#39;: &#39;supergroup&#39;, &#39;title&#39;: &#39;Beta&#39;}, &#39;text&#39;: &#39;/purge&#39;, &#39;entities&#39;: [{&#39;type&#39;: &#39;bot_command&#39;, &#39;offset&#39;: 0, &#39;length&#39;: 6}], &#39;caption_entities&#39;: [], &#39;photo&#39;: [], &#39;new_chat_members&#39;: [], &#39;new_chat_photo&#39;: [], &#39;delete_chat_photo&#39;: False, &#39;group_chat_created&#39;: False, &#39;supergroup_chat_created&#39;: False, &#39;channel_chat_created&#39;: False, &#39;from&#39;: {&#39;id&#39;: 540549815, &#39;first_name&#39;: &#39;Karatek&#39;, &#39;is_bot&#39;: False, &#39;username&#39;: &#39;Karatek_HD&#39;, &#39;language_code&#39;: &#39;en&#39;}}}
[2020-10-15 15:42:36,203 | ERROR] No error handlers are registered, logging exception.
Traceback (most recent call last):
  File &quot;/home/jens/Development/NemesisPY/venv/lib64/python3.8/site-packages/telegram/ext/dispatcher.py&quot;, line 340, in process_update
    handler.handle_update(update, self, check, context)
  File &quot;/home/jens/Development/NemesisPY/venv/lib64/python3.8/site-packages/telegram/ext/handler.py&quot;, line 118, in handle_update
    self.collect_additional_context(context, update, dispatcher, check_result)
  File &quot;/home/jens/Development/NemesisPY/venv/lib64/python3.8/site-packages/telegram/ext/commandhandler.py&quot;, line 191, in collect_additional_context
    context.args = check_result[0]
TypeError: &#39;bool&#39; object is not subscriptable
</code></pre></div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Example Code</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=c1>#  Nemesis - Powerful  Telegram group managment bot</span>
<span class=c1>#  Copyright (C) 2017 - 2019 Paul Larsen</span>
<span class=c1>#  Copyright (C) 2019 - 2020 KaratekHD</span>
<span class=c1>#</span>
<span class=c1>#  This program is free software: you can redistribute it and/or modify</span>
<span class=c1>#  it under the terms of the GNU General Public License as published by</span>
<span class=c1>#  the Free Software Foundation, either version 3 of the License, or</span>
<span class=c1>#  (at your option) any later version.</span>
<span class=c1>#</span>
<span class=c1>#  This program is distributed in the hope that it will be useful,</span>
<span class=c1>#  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class=c1>#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class=c1>#  GNU General Public License for more details.</span>
<span class=c1>#</span>
<span class=c1>#  You should have received a copy of the GNU General Public License</span>
<span class=c1>#  along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>

<span class=kn>import</span> <span class=nn>html</span>
<span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span><span class=p>,</span> <span class=n>List</span>

<span class=kn>from</span> <span class=nn>telegram</span> <span class=kn>import</span> <span class=n>Message</span><span class=p>,</span> <span class=n>Chat</span><span class=p>,</span> <span class=n>Update</span><span class=p>,</span> <span class=n>Bot</span><span class=p>,</span> <span class=n>User</span><span class=p>,</span> <span class=n>update</span><span class=p>,</span> <span class=n>ParseMode</span>
<span class=kn>from</span> <span class=nn>telegram.error</span> <span class=kn>import</span> <span class=n>BadRequest</span>
<span class=kn>from</span> <span class=nn>telegram.ext</span> <span class=kn>import</span> <span class=n>CommandHandler</span><span class=p>,</span> <span class=n>Filters</span><span class=p>,</span> <span class=n>CallbackContext</span>
<span class=kn>from</span> <span class=nn>telegram.ext.dispatcher</span> <span class=kn>import</span> <span class=n>run_async</span>
<span class=kn>from</span> <span class=nn>telegram.utils.helpers</span> <span class=kn>import</span> <span class=n>mention_html</span>

<span class=kn>from</span> <span class=nn>tg_bot</span> <span class=kn>import</span> <span class=n>dispatcher</span><span class=p>,</span> <span class=n>LOGGER</span>
<span class=kn>from</span> <span class=nn>tg_bot.modules.helper_funcs.chat_status</span> <span class=kn>import</span> <span class=n>user_admin</span><span class=p>,</span> <span class=n>can_delete</span>
<span class=kn>from</span> <span class=nn>tg_bot.modules.log_channel</span> <span class=kn>import</span> <span class=n>loggable</span>

<span class=nd>@run_async</span>
<span class=nd>@user_admin</span>
<span class=nd>@loggable</span>
<span class=k>def</span> <span class=nf>purge</span><span class=p>(</span><span class=n>update</span><span class=p>:</span> <span class=n>Update</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>CallbackContext</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
    <span class=n>bot</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>bot</span>
    <span class=n>args</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>args</span>
    <span class=n>msg</span> <span class=o>=</span> <span class=n>update</span><span class=o>.</span><span class=n>effective_message</span>  <span class=c1># type: Optional[Message]</span>
    <span class=k>if</span> <span class=n>msg</span><span class=o>.</span><span class=n>reply_to_message</span><span class=p>:</span>
        <span class=n>user</span> <span class=o>=</span> <span class=n>update</span><span class=o>.</span><span class=n>effective_user</span>  <span class=c1># type: Optional[User]</span>
        <span class=n>chat</span> <span class=o>=</span> <span class=n>update</span><span class=o>.</span><span class=n>effective_chat</span>  <span class=c1># type: Optional[Chat]</span>
        <span class=k>if</span> <span class=n>can_delete</span><span class=p>(</span><span class=n>chat</span><span class=p>,</span> <span class=n>bot</span><span class=o>.</span><span class=n>id</span><span class=p>):</span>
            <span class=n>message_id</span> <span class=o>=</span> <span class=n>msg</span><span class=o>.</span><span class=n>reply_to_message</span><span class=o>.</span><span class=n>message_id</span>
            <span class=n>delete_to</span> <span class=o>=</span> <span class=n>msg</span><span class=o>.</span><span class=n>message_id</span> <span class=o>-</span> <span class=mi>1</span>
            <span class=k>if</span> <span class=n>args</span> <span class=ow>and</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>isdigit</span><span class=p>():</span>
                <span class=n>new_del</span> <span class=o>=</span> <span class=n>message_id</span> <span class=o>+</span> <span class=nb>int</span><span class=p>(</span><span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
                <span class=c1># No point deleting messages which haven&#39;t been written yet.</span>
                <span class=k>if</span> <span class=n>new_del</span> <span class=o>&lt;</span> <span class=n>delete_to</span><span class=p>:</span>
                    <span class=n>delete_to</span> <span class=o>=</span> <span class=n>new_del</span>

            <span class=k>for</span> <span class=n>m_id</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>delete_to</span><span class=p>,</span> <span class=n>message_id</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>):</span>  <span class=c1># Reverse iteration over message ids</span>
                <span class=k>try</span><span class=p>:</span>
                    <span class=n>bot</span><span class=o>.</span><span class=n>deleteMessage</span><span class=p>(</span><span class=n>chat</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>m_id</span><span class=p>)</span>
                <span class=k>except</span> <span class=n>BadRequest</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
                    <span class=k>if</span> <span class=n>err</span><span class=o>.</span><span class=n>message</span> <span class=o>==</span> <span class=s2>&quot;Message can&#39;t be deleted&quot;</span><span class=p>:</span>
                        <span class=n>bot</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>chat</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=s2>&quot;Cannot delete all messages. The messages may be too old, I might &quot;</span>
                                                  <span class=s2>&quot;not have delete rights, or this might not be a supergroup.&quot;</span><span class=p>)</span>

                    <span class=k>elif</span> <span class=n>err</span><span class=o>.</span><span class=n>message</span> <span class=o>!=</span> <span class=s2>&quot;Message to delete not found&quot;</span><span class=p>:</span>
                        <span class=n>LOGGER</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;Error while purging chat messages.&quot;</span><span class=p>)</span>

            <span class=k>try</span><span class=p>:</span>
                <span class=n>msg</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>
            <span class=k>except</span> <span class=n>BadRequest</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>err</span><span class=o>.</span><span class=n>message</span> <span class=o>==</span> <span class=s2>&quot;Message can&#39;t be deleted&quot;</span><span class=p>:</span>
                    <span class=n>bot</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>chat</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=s2>&quot;Cannot delete all messages. The messages may be too old, I might &quot;</span>
                                              <span class=s2>&quot;not have delete rights, or this might not be a supergroup.&quot;</span><span class=p>)</span>

                <span class=k>elif</span> <span class=n>err</span><span class=o>.</span><span class=n>message</span> <span class=o>!=</span> <span class=s2>&quot;Message to delete not found&quot;</span><span class=p>:</span>
                    <span class=n>LOGGER</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;Error while purging chat messages.&quot;</span><span class=p>)</span>

            <span class=n>bot</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>chat</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=s2>&quot;Purge complete.&quot;</span><span class=p>)</span>
            <span class=k>return</span> <span class=s2>&quot;&lt;b&gt;</span><span class=si>{}</span><span class=s2>:&lt;/b&gt;&quot;</span> \
                   <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>#PURGE&quot;</span> \
                   <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&lt;b&gt;Admin:&lt;/b&gt; </span><span class=si>{}</span><span class=s2>&quot;</span> \
                   <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Purged &lt;code&gt;</span><span class=si>{}</span><span class=s2>&lt;/code&gt; messages.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>html</span><span class=o>.</span><span class=n>escape</span><span class=p>(</span><span class=n>chat</span><span class=o>.</span><span class=n>title</span><span class=p>),</span>
                                                               <span class=n>mention_html</span><span class=p>(</span><span class=n>user</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>user</span><span class=o>.</span><span class=n>first_name</span><span class=p>),</span>
                                                               <span class=n>delete_to</span> <span class=o>-</span> <span class=n>message_id</span><span class=p>)</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=n>msg</span><span class=o>.</span><span class=n>reply_text</span><span class=p>(</span><span class=s2>&quot;Reply to a message to select where to start purging from.&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=s2>&quot;&quot;</span>

<span class=n>DELETE_HANDLER</span> <span class=o>=</span> <span class=n>CommandHandler</span><span class=p>(</span><span class=s2>&quot;del&quot;</span><span class=p>,</span> <span class=n>del_message</span><span class=p>,</span> <span class=n>filters</span><span class=o>=</span><span class=n>Filters</span><span class=o>.</span><span class=n>group</span><span class=p>)</span>
<span class=n>PURGE_HANDLER</span> <span class=o>=</span> <span class=n>CommandHandler</span><span class=p>(</span><span class=s2>&quot;purge&quot;</span><span class=p>,</span> <span class=n>purge</span><span class=p>,</span> <span class=n>filters</span><span class=o>=</span><span class=n>Filters</span><span class=o>.</span><span class=n>group</span><span class=p>,</span> <span class=n>pass_args</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>PURGE2_HANDLER</span> <span class=o>=</span> <span class=n>CommandHandler</span><span class=p>(</span><span class=s2>&quot;p&quot;</span><span class=p>,</span> <span class=n>purge</span><span class=p>,</span> <span class=n>filters</span><span class=o>=</span><span class=n>Filters</span><span class=o>.</span><span class=n>group</span><span class=p>,</span> <span class=n>pass_args</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

<span class=n>dispatcher</span><span class=o>.</span><span class=n>add_handler</span><span class=p>(</span><span class=n>DELETE_HANDLER</span><span class=p>)</span>
<span class=n>dispatcher</span><span class=o>.</span><span class=n>add_handler</span><span class=p>(</span><span class=n>PURGE_HANDLER</span><span class=p>)</span>
<span class=n>dispatcher</span><span class=o>.</span><span class=n>add_handler</span><span class=p>(</span><span class=n>PURGE2_HANDLER</span><span class=p>)</span>
</code></pre></div> </div> </div> <p>Anyway, this is the reason nothing happens right now - the few changes I made are not yet ready to show to the public, and I have some personal problems at the moment as well. </p> <p>~Karatek_HD</p> <p>Comments: <script src=https://utteranc.es/client.js repo=KaratekHD/Comments issue-term=pathname theme=github-light crossorigin=anonymous async>
</script></p> <!-- Analytics --> <script data-skip-dnt=true async defer src=https://sa-api.karatek.systems/hello.js></script> <noscript><img src=https://sa-api.karatek.systems/hello.gif alt></noscript> <!-- Privacy--> <p><link rel=stylesheet type=text/css href=//wpcc.io/lib/1.0.2/cookieconsent.min.css><script src=//wpcc.io/lib/1.0.2/cookieconsent.min.js></script><script>window.addEventListener("load", function(){window.wpcc.init({"colors":{"popup":{"background":"#ffe4e1","text":"#000000","border":"#c25e5e"},"button":{"background":"#c25e5e","text":"#ffffff"}},"corners":"large","content":{"href":"https://karatek.net/Legal/privacy/","message":"By using this website you agree to our privacy policies."}})});</script></p> <!-- Chat --> <script>
window.replainSettings = { id: '8d420028-e493-49ec-8f72-e3659c3a805d' };
(function(u){var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src=u;
var x=document.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);
})('https://widget.replain.cc/dist/client.js');
</script> <hr> <div class=md-source-date> <small> Last update: October 15, 2020 </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../../../07/22/verschwoerungen/ title="[22/07/2020] Aufruf gegen Verschwörungstheorien" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> [22/07/2020] Aufruf gegen Verschwörungstheorien </div> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright © 2020 KaratekHD. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/KaratekHD target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://mastodon.social/@KaratekHD target=_blank rel=noopener title=mastodon.social class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg> </a> <a href=https://t.me/Karatek_HD target=_blank rel=noopener title=t.me class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg> </a> <a href=mailto:kontakt@karatek.net target=_blank rel=noopener title class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg> </a> <a href=https://www.reddit.com/user/KaratekHD target=_blank rel=noopener title=www.reddit.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../../../../assets/javascripts/vendor.3636a4ec.min.js></script> <script src=../../../../../assets/javascripts/bundle.e9fe3281.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../../../../..",
          features: ["tabs", "instant", null],
          search: Object.assign({
            worker: "../../../../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>